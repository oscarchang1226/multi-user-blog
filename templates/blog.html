{% extends "index.html" %}

{% block content %}
    <main>
        <div class="lone_button">
            <a href="/newpost">New Post</a>
        </div>
            {% for entry in entries %}
            <form method="post">
                <div class="entry_container">
                    <div class="entry_header">
                        <h2><a href="/blog/{{entry.key().id()}}">{{entry.subject}}</a></h2>
                        <span class="entry_author">{{entry.user.username}}</span>
                        <span class="entry_created">{{entry.created.strftime("%B %d, %Y")}}</span>
                    </div>
                    <pre class="entry_content">{{entry.content}}</pre>
                    <div class="entry_footer">
                        <input type="hidden" name="entry_id" value="{{entry.key().id()}}"/>
                        {% if entry.user.key().id() != current_user.key().id() %}
                            {% if current_user.key() in entry.liked_by %}
                                <input class="like_button liked" type="image"/>
                            {% else %}
                                <input class="like_button" type="image"/>
                            {% endif %}
                        {% else %}
                            <input class="like_button" type="image" disabled="true"/>
                        {% endif %}
                        <span>{{entry.liked_by|length}}</span>
                    </div>
                </div>
            </form>
            {% endfor %}
        </form>
    </main>
{% endblock %}
